(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39b900aa"],{1004:function(e,t,s){"use strict";s("e72f")},1120:function(e,t,s){},7359:function(e,t,s){"use strict";s("e660")},"76e3":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.ready?s("AddressBlock",{on:{postaddress:e.getAddress}}):e._e(),e.ready?s("OrderBlock",{on:{postorder:e.getOrder}}):e._e()],1)},o=[],a=s("1da1"),n=(s("96cf"),s("d3b7"),s("3ca3"),s("ddb0"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"outerBlock"},[e.noAddress?s("VanCell",{staticStyle:{"border-radius":"25px"},attrs:{"is-link":"",title:"没有收货地址？立即添加！"},on:{click:e.toAddressManage}}):s("VanCell",{staticStyle:{"border-radius":"25px"},attrs:{title:e.addressNow.addressDetails,center:"","is-link":""},on:{click:e.showPopup}}),e.noAddress?e._e():s("VanPopup",{staticStyle:{height:"70%"},attrs:{closeable:"",position:"bottom"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("div",{staticStyle:{"margin-top":"10px","margin-left":"20px","font-weight":"bold","border-radius":"25px"}},[e._v(" 选择你的地址 ")]),s("div",{staticStyle:{"margin-top":"20px",border:"1px solid #96c2f1",background:"#eff7ff"}},[s("VanCell",{attrs:{label:e.addressList[0].addressDetails,size:"large",title:"默认地址"},on:{click:function(t){return e.changeAddress(0)}}})],1),e._l(e.addressList,(function(t,r){return s("div",{key:r,staticStyle:{"margin-top":"20px",border:"1px solid #96c2f1",background:"#eff7ff"}},[0!==r?s("VanCell",{attrs:{label:t.addressDetails,title:"地址"+r,size:"large"},on:{click:function(t){return e.changeAddress(r)}}}):e._e()],1)}))],2)],1)}),i=[],d={name:"AddressBlock",data:function(){return{show:!1,noAddress:!0,addressList:[],addressNow:null}},methods:{showPopup:function(){this.show=!0},changeAddress:function(e){this.addressNow=this.addressList[e],this.$emit("postaddress",this.addressNow),this.show=!1},toAddressManage:function(){this.$router.push({name:"地址管理"})}},created:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,o,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.e("chunk-4a8a29de").then(s.bind(null,"31ca"));case 2:return r=t.sent,o=r.$,t.next=6,o.get("/address");case 6:if(a=t.sent,0===a.data.information.length)e.noAddress=!0;else{for(n=0;n<a.data.information.length;n++)!0===a.data.information[n].isDefault?e.addressList.unshift(a.data.information[n]):e.addressList.push(a.data.information[n]);e.addressNow=e.addressList[0],e.noAddress=!1,e.$emit("postaddress",e.addressNow)}case 8:case"end":return t.stop()}}),t)})))()}},c=d,l=(s("1004"),s("2877")),u=Object(l["a"])(c,n,i,!1,null,"527d63da",null),p=u.exports,h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("OrderCard",{attrs:{order:e.order,place:"SetOrder",value:e.value}}),s("div",{staticClass:"card"},[s("ARow",{attrs:{justify:"space-between",type:"flex"}},[s("ACol",{staticStyle:{"padding-left":"16px"}},[e._v(" 选择数量： ")]),s("ARow",[s("van-stepper",{on:{change:e.checkOver},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1),s("van-cell",{attrs:{"is-link":""},on:{click:e.showPopup}},[e._v(e._s(e.postNow.logisticsName))]),s("van-popup",{staticStyle:{height:"70%"},attrs:{closeable:"",position:"bottom",round:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("div",{staticStyle:{margin:"10px","padding-left":"10px","font-weight":"bold"}},[e._v(" "+e._s(e.postNow.logisticsName)+" ")]),e._l(e.postList,(function(t,r){return s("div",{key:r,staticStyle:{"margin-left":"10px","margin-right":"10px","margin-top":"20px",border:"1px solid #96c2f1",background:"#eff7ff"}},[s("VanCell",{attrs:{label:t.logisticsName,title:"物流"+t.logisticsId,size:"large"},on:{click:function(t){return e.choosePost(r)}}})],1)}))],2),s("van-field",{attrs:{autosize:{},label:"留言",maxlength:"200",placeholder:"请输入留言",rows:"2","show-word-limit":"",type:"textarea"},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),s("van-submit-bar",{attrs:{price:e.value*e.order.price*100,"button-text":"提交订单"},on:{submit:e.onSubmit}})],1)},f=[],m=(s("a9e3"),s("e447")),g=s("d399"),b={components:{OrderCard:m["a"]},name:"orderBlock",data:function(){return{message:"",value:1,show:!1,postNow:{logisticsName:"请选择物流",logisticsId:Number},order:{shopName:String,subIcon:String,commodityName:String,subName:String,price:Number,countCommodity:Number,subId:Number,cid:Number,shopId:Number,stock:Number},postList:[]}},methods:{onSubmit:function(){"请选择物流"===this.postNow.logisticsName?Object(g["a"])("请选择物流"):this.$emit("postorder",this.order,this.postNow,this.message)},showPopup:function(){this.show=!0},choosePost:function(e){this.postNow=this.postList[e],this.show=!1,Object(g["a"])("物流变更")},checkOver:function(e){e>this.order.stock&&(this.value--,Object(g["a"])("没有那么多库存"))}},created:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.order=e.$store.state.order,e.value=e.order.countCommodity,t.next=4,s.e("chunk-4a8a29de").then(s.bind(null,"31ca"));case 4:return r=t.sent,o=r.$,t.next=8,o.get("/logistic");case 8:a=t.sent,e.postList=a.data.information;case 10:case"end":return t.stop()}}),t)})))()}},v=b,w=(s("7359"),Object(l["a"])(v,h,f,!1,null,"c9d8bfca",null)),x=w.exports,y={name:"setOrder",components:{OrderBlock:x,AddressBlock:p},data:function(){return{totalPrice:2e3,address:null,ready:!1,order:Object,post:Object,message:""}},created:function(){this.ready=!0},methods:{getAddress:function(e){this.address=e},getOrder:function(e,t,r){var o=this;return Object(a["a"])(regeneratorRuntime.mark((function a(){var n,i,d,c,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,s.e("chunk-4a8a29de").then(s.bind(null,"31ca"));case 2:return n=a.sent,i=n.$,d=new FormData,d.append("subId",e.subId),d.append("countCommodity",e.countCommodity),d.append("receiveAddressId",o.address.receiveAddressId),d.append("orderLogisticsId",t.logisticsId),a.next=11,i.post("/order",d);case 11:if(c=a.sent,c.data.success&&Object(g["a"])("下单成功"),""===r){a.next=21;break}return l=new FormData,l.append("myType","用户"),l.append("oppId",e.shopId),l.append("oppType","商家"),l.append("chatContent",r),a.next=21,i.post("/user/sendChat",l);case 21:return o.$store.state.orderId=c.data.information,a.next=24,o.$router.push({name:"订单详情"});case 24:case"end":return a.stop()}}),a)})))()}}},k=y,_=Object(l["a"])(k,r,o,!1,null,"6e39a9c4",null);t["default"]=_.exports},8558:function(e,t,s){"use strict";s("1120")},e447:function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"card"},["SetOrder"===e.place?s("van-cell",{style:{"font-weight":"bold","font-size":"120%","border-radius":"25px"}},[s("van-icon",{attrs:{name:"shop-o"}}),e._v(" "+e._s(e.order.shopName)+" ")],1):"ShopManage"===e.place?s("div",{staticStyle:{margin:"10px","padding-top":"10px","padding-left":"10px","font-weight":"bold","font-size":"large"}},[e._v(" 订单号："+e._s(e.order.orderId)+" ")]):s("van-cell",{style:{"font-weight":"bold","font-size":"120%","border-radius":"25px"}},[s("van-icon",{attrs:{name:"shop-o"}}),e._v(" "+e._s(e.order.shopName)+" ")],1),"OrderManage"===e.place||"ShopManage"===e.place?s("ARow",{staticStyle:{color:"red","font-weight":"bold","margin-left":"20px"},attrs:{span:"12"}},[e._v(" 订单"+e._s(e.order.itemName)+" ")]):e._e(),s("ARow",{attrs:{justify:"end",type:"flex"}},[s("ACol",{attrs:{span:"10"}},[s("div",[s("img",{staticClass:"goodsPicture",attrs:{src:e.order.subIcon}})])]),s("ACol",{attrs:{span:"1"}}),s("ACol",{attrs:{span:"12"}},[s("div",{style:{"font-weight":"bold","font-size":"3vw",color:"black"}},[s("span",[e._v(" "+e._s(e.order.commodityName)+" ")]),s("br"),s("span",{style:{"font-size":"2vw",color:"grey"}},[e._v(" "+e._s(e.order.subName)+" ")])])]),s("ACol",{style:{"font-size":"2vw",color:"grey"}},[e._v(" ￥ "+e._s(e.order.price)+" *"+e._s(e.value)+" ")])],1),s("ARow",{attrs:{justify:"end",type:"flex"}},[s("ACol",{style:{"font-weight":"bold","font-size":"3vw",color:"grey"}},[e._v(" 总价：￥ "+e._s(Math.round(e.order.price*e.value*100)/100)+" ")])],1),"OrderManage"===e.place?s("ARow",{attrs:{justify:"end",type:"flex"}},[s("ACol",[s("van-button",{style:{height:"35px","margin-right":"5px",width:"25vw"},attrs:{color:"orange",round:"",type:"info"},on:{click:e.toOrderDetail}},[e._v("查看详情 ")])],1)],1):e._e(),"ShopManage"===e.place&&"待发货"===e.order.itemName?s("ARow",{attrs:{justify:"end",type:"flex"}},[s("ACol",[s("van-button",{style:{height:"35px","margin-right":"5px",width:"25vw"},attrs:{color:"orange",round:"",type:"info"},on:{click:e.postGoods}},[e._v("我已发货 ")])],1)],1):e._e()],1)},o=[],a=(s("a9e3"),{props:{place:String,order:null,value:Number},name:"Card",data:function(){return{buttonType:null,goodAmount:0}},methods:{toOrderDetail:function(){this.$store.state.orderId=this.order.orderId,this.$router.push({path:"/OrderDetail"})},postGoods:function(){this.$emit("postgood")}}}),n=a,i=(s("8558"),s("2877")),d=Object(i["a"])(n,r,o,!1,null,"4c06663b",null);t["a"]=d.exports},e660:function(e,t,s){},e72f:function(e,t,s){}}]);