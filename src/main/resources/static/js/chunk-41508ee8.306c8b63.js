(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41508ee8"],{"2b10b":function(e,t,s){},"6bc5":function(e,t,s){"use strict";s("2b10b")},a1d0:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ARow",[s("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[e._l(e.list,(function(t,n){return s("van-cell",{key:n},[s("ARow",[s("ARow",[s("ACol",{attrs:{span:"3"}},[s("a-avatar",{attrs:{src:t.userSelfie}})],1),s("ACol",{style:{height:"5vw","font-weight":"bold"},attrs:{span:"21"}},[e._v(" "+e._s(t.userName)+" ")]),s("ACol",[e._v(" "+e._s(t.commentTime[0])+"/"+e._s(t.commentTime[1])+"/"+e._s(t.commentTime[2])+" "+e._s(t.commentTime[3])+":"+e._s(t.commentTime[4])+":"+e._s(t.commentTime[5])+" ")])],1),!0===t.praise?s("ARow",{style:{"font-weight":"bold",color:"blue"}},[e._v(" 绝赞好评 ")]):e._e(),!1===t.praise?s("ARow",{style:{"font-weight":"bold",color:"red"}},[e._v(" 属实不行 ")]):e._e(),s("ARow",{style:{"font-size":"4vw",height:"5vw"}},[e._v(" "+e._s(t.commentDetails)+" ")]),s("ARow",[s("ACol",{attrs:{push:"21",span:"3"}},[s("van-icon",{attrs:{badge:t.subCommentCount,name:"chat-o"},on:{click:function(t){return e.showPopup(n)}}})],1)],1),s("ARow",{style:{height:"5px"}})],1)],1)})),s("van-popup",{style:{height:"70%"},attrs:{closeable:"",position:"bottom"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("SubComments",{attrs:{fid:this.fid,scl:e.subcomments},on:{reload:e.reload}})],1)],2)],1)},o=[],a=s("1da1"),i=(s("96cf"),s("d3b7"),s("3ca3"),s("ddb0"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",[s("ARow",{staticStyle:{"margin-top":"10px"}},[s("ACol",{staticStyle:{height:"5vw","font-size":"4vw","font-weight":"bold"},attrs:{push:"1"}},[e._v(" 更多评论 ")])],1),s("ARow",{staticStyle:{height:"10px"}})],1),0===this.scl.length?s("div",[s("ARow",{staticStyle:{"text-align":"center"}},[e._v(" 还没有人评论，要来做沙发吗~~~~ ")]),s("ARow",{style:{height:"10px"}})],1):s("div",e._l(e.scl,(function(t,n){return s("ARow",{key:n,style:{"margin-top":"10px"}},[s("ARow",{style:{height:"10px"}}),s("ARow",[s("ACol",{attrs:{push:"1",span:"3"}},[s("a-avatar",{attrs:{src:t.userSelfie}})],1),s("ACol",{style:{height:"5vw","font-weight":"bold"},attrs:{push:"1",span:"21"}},[e._v(" "+e._s(t.userName)+" ")]),s("ACol",[e._v(" "+e._s(t.subCommentTime[0])+"/"+e._s(t.subCommentTime[1])+"/"+e._s(t.subCommentTime[2])+" "+e._s(t.subCommentTime[3])+":"+e._s(t.subCommentTime[4])+":"+e._s(t.subCommentTime[5])+" ")])],1),s("ARow",[s("ACol",{style:{"font-size":"4vw",height:"5vw"},attrs:{push:"1"}},[e._v(" "+e._s(t.subCommentDetails)+" ")])],1),s("ARow",{staticStyle:{background:"white",height:"10px"}}),s("ARow",{staticStyle:{border:"1px solid #ebedf0"}})],1)})),1),s("div",{staticClass:"footerDiv"},[s("ARow",{staticClass:"footer",attrs:{justify:"space-between",type:"flex"}},[s("ACol",[s("VanCellGroup",[s("VanField",{attrs:{autosize:{},label:"评论",placeholder:"也来说两句吧",rows:"1",type:"textarea"},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1)],1),s("ACol",[s("van-button",{attrs:{color:"orange",type:"primary"},on:{click:e.addComments}},[e._v("评论")])],1)],1)],1)])}),r=[],m=(s("a9e3"),s("d399")),c={name:"SubComments",props:{scl:Array,fid:Number},mounted:function(){},data:function(){return{message:""}},methods:{addComments:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,o,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.message){t.next=4;break}Object(m["a"])("请输入评论"),t.next=13;break;case 4:return t.next=6,s.e("chunk-4a8a29de").then(s.bind(null,"31ca"));case 6:return n=t.sent,o=n.$,a={commentId:e.fid,subCommentDetails:e.message,uid:e.$store.state.user.uid},t.next=11,o.post("/user/comment/comments",a);case 11:i=t.sent,!0===i.data.information?(Object(m["a"])("评论成功"),e.message="",e.$emit("reload")):Object(m["a"])("评论失败");case 13:case"end":return t.stop()}}),t)})))()}}},l=c,u=(s("6bc5"),s("2877")),d=Object(u["a"])(l,i,r,!1,null,"89a98e0e",null),h=d.exports,b={name:"CommentsDetail",components:{SubComments:h},data:function(){return{show:!1,allLoaded:!1,list:[],subCommentList:[],subShowList:[],loading:!1,finished:!1,pages:0,subcomments:[],fid:0}},methods:{onLoad:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,o,a,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.e("chunk-4a8a29de").then(s.bind(null,"31ca"));case 2:return n=t.sent,o=n.$,e.pages++,t.next=7,o.get("/commodity/comment?cid=".concat(1,"&page=",e.pages,"&pageSize=",10));case 7:a=t.sent,i=0;case 9:if(!(i<a.data.information.records.length)){t.next=19;break}return e.list.push(a.data.information.records[i]),t.next=13,o.get("/commodity/comment/subComments?commentId=".concat(a.data.information.records[i].commentId));case 13:r=t.sent,e.subCommentList.push(r.data.information),e.subShowList.push(r.data.information.length);case 16:i++,t.next=9;break;case 19:e.loading=!1,e.finished=!0;case 21:case"end":return t.stop()}}),t)})))()},reload:function(){this.list=[],this.subCommentList=[],this.show=!1,this.allLoaded=!1,this.subShowList=[],this.loading=!1,this.finished=!1,this.pages=0,this.subcomments=[],this.fid=0},showPopup:function(e){this.show=!0,this.subcomments=this.subCommentList[e],this.fid=this.list[e].cid}}},p=b,f=Object(u["a"])(p,n,o,!1,null,"2b81a99a",null);t["default"]=f.exports}}]);