(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5eab1671"],{"4acb":function(e,t,s){"use strict";s("9837")},"76e3":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.ready?s("AddressBlock",{on:{postaddress:e.getAddress}}):e._e(),e.ready?s("OrderBlock",{on:{postorder:e.getOrder}}):e._e()],1)},o=[],a=s("1da1"),n=(s("96cf"),s("d3b7"),s("3ca3"),s("ddb0"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"outerBlock"},[e.noAddress?s("VanCell",{staticStyle:{"border-radius":"25px"},attrs:{title:"没有收货地址？立即添加！","is-link":""},on:{click:e.toAddressManage}}):s("VanCell",{staticStyle:{"border-radius":"25px"},attrs:{title:e.addressNow.addressDetails,"is-link":"",center:""},on:{click:e.showPopup}}),e.noAddress?e._e():s("VanPopup",{staticStyle:{height:"70%"},attrs:{closeable:"",position:"bottom"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("div",{staticStyle:{"margin-top":"10px","margin-left":"20px","font-weight":"bold","border-radius":"25px"}},[e._v(" 选择你的地址 ")]),s("div",{staticStyle:{"margin-top":"20px",border:"1px solid #96c2f1",background:"#eff7ff"}},[s("VanCell",{attrs:{title:"默认地址",size:"large",label:e.addressList[0].addressDetails},on:{click:function(t){return e.changeAddress(0)}}})],1),e._l(e.addressList,(function(t,r){return s("div",{key:r,staticStyle:{"margin-top":"20px",border:"1px solid #96c2f1",background:"#eff7ff"}},[0!==r?s("VanCell",{attrs:{title:"地址"+r,size:"large",label:e.addressList[r].addressDetails},on:{click:function(t){return e.changeAddress(r)}}}):e._e()],1)}))],2)],1)}),i=[],d={name:"AddressBlock",data:function(){return{show:!1,noAddress:!0,addressList:[],addressNow:null}},methods:{showPopup:function(){this.show=!0},changeAddress:function(e){this.addressNow=this.addressList[e],this.$emit("postaddress",this.addressNow)},toAddressManage:function(){alert("todo")}},created:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,o,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.e("chunk-4a8a29de").then(s.bind(null,"31ca"));case 2:return r=t.sent,o=r.$,t.next=6,o.get("/address");case 6:if(a=t.sent,0===a.data.information.length)e.noAddress=!0;else{for(n=0;n<a.data.information.length;n++)!0===a.data.information[n].isDefault?e.addressList.unshift(a.data.information[n]):e.addressList.push(a.data.information[n]);e.addressNow=e.addressList[0],e.noAddress=!1,e.$emit("postaddress",e.addressNow)}case 8:case"end":return t.stop()}}),t)})))()}},c=d,l=(s("a762"),s("2877")),u=Object(l["a"])(c,n,i,!1,null,"19f1566a",null),p=u.exports,f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("OrderCard",{attrs:{place:"SetOrder",order:e.order,value:e.value}}),s("div",{staticClass:"card"},[s("ARow",{attrs:{type:"flex",justify:"space-between"}},[s("ACol",{staticStyle:{"padding-left":"16px"}},[e._v(" 选择数量： ")]),s("ARow",[s("van-stepper",{on:{change:e.checkOver},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1),s("van-cell",{attrs:{"is-link":""},on:{click:e.showPopup}},[e._v(e._s(e.postNow.logisticsName))]),s("van-popup",{staticStyle:{height:"70%"},attrs:{position:"bottom",closeable:"",round:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("div",{staticStyle:{margin:"10px","padding-left":"10px","font-weight":"bold"}},[e._v(" "+e._s(e.postNow.logisticsName)+" ")]),e._l(e.postList,(function(t,r){return s("div",{key:r,staticStyle:{"margin-left":"10px","margin-right":"10px","margin-top":"20px",border:"1px solid #96c2f1",background:"#eff7ff"}},[s("VanCell",{attrs:{title:"物流"+t.logisticsId,size:"large",label:t.logisticsName},on:{click:function(t){return e.choosePost(r)}}})],1)}))],2),s("van-field",{attrs:{rows:"2",autosize:"",label:"留言",type:"textarea",maxlength:"200",placeholder:"请输入留言","show-word-limit":""},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),s("van-submit-bar",{attrs:{price:e.value*e.order.price*100,"button-text":"提交订单"},on:{submit:e.onSubmit}})],1)},h=[],m=(s("a9e3"),s("e447")),b=s("d399"),g={components:{OrderCard:m["a"]},name:"orderBlock",data:function(){return{message:"",value:1,show:!1,postNow:{logisticsName:"请选择物流",logisticsId:Number},order:{shopName:String,subIcon:String,commodityName:String,subName:String,price:Number,countCommodity:Number,subId:Number,cid:Number,shopId:Number,stock:Number},postList:[]}},methods:{onSubmit:function(){"请选择物流"===this.postNow.logisticsName?Object(b["a"])("请选择物流"):this.$emit("postorder",this.order,this.postNow,this.message)},showPopup:function(){this.show=!0},choosePost:function(e){this.postNow=this.postList[e],this.show=!1,Object(b["a"])("物流变更")},checkOver:function(e){e>this.order.stock&&(this.value--,Object(b["a"])("没有那么多库存"))}},created:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.order=e.$store.state.order,e.value=e.order.countCommodity,t.next=4,s.e("chunk-4a8a29de").then(s.bind(null,"31ca"));case 4:return r=t.sent,o=r.$,t.next=8,o.get("/logistic");case 8:a=t.sent,e.postList=a.data.information;case 10:case"end":return t.stop()}}),t)})))()}},v=g,w=(s("4acb"),Object(l["a"])(v,f,h,!1,null,"5659a9dc",null)),x=w.exports,y={name:"setOrder",components:{OrderBlock:x,AddressBlock:p},data:function(){return{totalPrice:2e3,address:null,ready:!1,order:Object,post:Object,message:""}},created:function(){this.ready=!0},methods:{getAddress:function(e){this.address=e},getOrder:function(e,t,r){var o=this;return Object(a["a"])(regeneratorRuntime.mark((function a(){var n,i,d,c,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,s.e("chunk-4a8a29de").then(s.bind(null,"31ca"));case 2:return n=a.sent,i=n.$,d=new FormData,d.append("subId",e.subId),d.append("countCommodity",e.countCommodity),d.append("receiveAddressId",o.address.receiveAddressId),d.append("orderLogisticsId",t.logisticsId),a.next=11,i.post("/order",d);case 11:if(c=a.sent,c.data.success&&Object(b["a"])("下单成功"),""===r){a.next=21;break}return l=new FormData,l.append("myType","用户"),l.append("oppId",e.shopId),l.append("oppType","商家"),l.append("chatContent",r),a.next=21,i.post("/user/sendChat",l);case 21:return o.$store.state.orderId=c.data.information,a.next=24,o.$router.push({name:"订单详情"});case 24:case"end":return a.stop()}}),a)})))()}}},k=y,_=Object(l["a"])(k,r,o,!1,null,"69f4537c",null);t["default"]=_.exports},9837:function(e,t,s){},a762:function(e,t,s){"use strict";s("bcbc")},bb44:function(e,t,s){},bcbc:function(e,t,s){},e447:function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"card"},["SetOrder"!==e.place?s("van-cell",{style:{"font-weight":"bold","font-size":"120%","border-radius":"25px"},attrs:{"is-link":""},on:{click:e.toShop}},[s("van-icon",{attrs:{name:"shop-o"}}),e._v(" "+e._s(e.order.shopName)+" ")],1):s("van-cell",{style:{"font-weight":"bold","font-size":"120%","border-radius":"25px"}},[s("van-icon",{attrs:{name:"shop-o"}}),e._v(" "+e._s(e.order.shopName)+" ")],1),"OrderManage"===e.place?s("ARow",{staticStyle:{color:"red","font-weight":"bold","margin-left":"20px"},attrs:{span:"12"}},[e._v(" 订单"+e._s(e.order.itemName)+" ")]):e._e(),s("ARow",{attrs:{type:"flex",justify:"end"}},[s("ACol",{attrs:{span:"10"}},[s("div",[s("img",{staticClass:"goodsPicture",attrs:{src:e.order.subIcon}})])]),s("ACol",{attrs:{span:"1"}}),s("ACol",{attrs:{span:"12"}},[s("div",{style:{"font-weight":"bold","font-size":"3vw",color:"black"}},[s("span",[e._v(" "+e._s(e.order.commodityName)+" ")]),s("br"),s("span",{style:{"font-size":"2vw",color:"grey"}},[e._v(" "+e._s(e.order.subName)+" ")])])]),s("ACol",{style:{"font-size":"2vw",color:"grey"}},[e._v(" ￥ "+e._s(e.order.price)+" *"+e._s(e.value)+" ")])],1),s("ARow",{attrs:{justify:"end",type:"flex"}},[s("ACol",{style:{"font-weight":"bold","font-size":"3vw",color:"grey"}},[e._v(" 总价：￥ "+e._s(e.order.price*e.value)+" ")])],1),"OrderManage"===e.place?s("ARow",{attrs:{justify:"end",type:"flex"}},[s("ACol",[s("van-button",{style:{height:"35px","margin-right":"5px",width:"25vw"},attrs:{round:"",type:"info",color:"orange"},on:{click:e.toOrderDetail}},[e._v("查看详情")])],1)],1):e._e()],1)},o=[],a=(s("a9e3"),{props:{place:String,order:null,value:Number},name:"Card",data:function(){return{buttonType:null,goodAmount:0}},methods:{toShop:function(){this.$router.push({path:"/Shop"})},toOrderDetail:function(){this.$store.state.orderId=this.order.orderId,this.$router.push({path:"/OrderDetail"})}}}),n=a,i=(s("f25b"),s("2877")),d=Object(i["a"])(n,r,o,!1,null,"29ee5940",null);t["a"]=d.exports},f25b:function(e,t,s){"use strict";s("bb44")}}]);