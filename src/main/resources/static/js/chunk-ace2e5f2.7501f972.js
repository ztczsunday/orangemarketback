(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ace2e5f2"],{"0c36":function(t,e,o){},"1fd0":function(t,e,o){"use strict";o("0c36")},"21c0":function(t,e,o){"use strict";o("36cb")},"36cb":function(t,e,o){},"53e6":function(t,e,o){},"9d03":function(t,e,o){"use strict";o("53e6")},b0c0:function(t,e,o){var s=o("83ab"),n=o("9bf2").f,i=Function.prototype,r=i.toString,c=/^\s*function ([^ (]*)/,a="name";s&&!(a in i)&&n(i,a,{configurable:!0,get:function(){try{return r.call(this).match(c)[1]}catch(t){return""}}})},ff68:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ARow",[o("ARow",[!0===t.flag?o("ProductDetailMessage",{ref:"ProductDetailMessage",attrs:{goodsInfo:this.goodsInfo}}):t._e()],1),!0===t.flag?o("ProductFooter",{attrs:{isCollected:t.goodsInfo.isCollected},on:{clickbuy:t.showBuy,collect:t.doFavorite}}):t._e()],1)},n=[],i=o("1da1"),r=(o("96cf"),o("a9e3"),o("d3b7"),o("3ca3"),o("ddb0"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ARow",{style:{height:"80vw"}},[o("ARow",{attrs:{justify:"center",type:"flex"}},[o("ACol",{attrs:{span:"24"}},[o("van-swipe",{attrs:{autoplay:3e3}},t._l(t.goodsInfo.commodityPictures,(function(t,e){return o("van-swipe-item",{key:e},[o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.pictureUrl,expression:"image.pictureUrl"}],staticClass:"productPicture"})])})),1)],1)],1),o("ARow",{style:{height:"10px"}}),o("ARow",{staticClass:"buy"},[o("ARow",[o("ARow"),o("ACol",{attrs:{span:"15"}},[o("div",{staticClass:"priceBlock"},[t._v(" ￥ "+t._s(t.priceLow)+" ")])]),o("ACol",{staticClass:"grades",attrs:{span:"9"}},[t._v(" 好评率："+t._s(t.praiseRate)+"% ")])],1),o("ARow"),o("ARow",{attrs:{justify:"center",type:"flex"}},[o("ACol",{attrs:{span:"22"}},[o("div",{staticClass:"introduce"},[t._v(" "+t._s(t.goodsInfo.commodityName)+" ")])])],1),o("ARow",{style:{height:"3vw"}})],1),o("ARow",{style:{height:"10px"}}),t.flag?o("ProductDetailBuy",{ref:"ProductDetailBuy",attrs:{typeList:t.goodsInfo.subCommodity,otherMessage:t.otherMessage}}):t._e(),o("ARow",{style:{height:"10px"}}),o("ARow",{staticClass:"buy"},[t.flag?o("CommentsBlock",{attrs:{comments:t.goodsInfo.hotComments}}):t._e()],1),o("ARow",{style:{height:"10px"}}),o("ARow",{staticClass:"buy"},[t.flag?o("ShopBlock",{attrs:{shopName:t.goodsInfo.shopName,shopDescription:t.goodsInfo.shopDescription,shopId:t.goodsInfo.shopId}}):t._e()],1),o("ARow",[o("div",{style:{width:"100%","text-align":"center"}},[t._v(" -----商品详情----- ")]),t._l(t.goodsInfo.commodityDetails,(function(t,e){return o("div",{key:e},[o("img",{staticClass:"detailPicture",attrs:{src:t.detailsUrl}})])}))],2),o("ARow",{style:{height:"50px"}})],1)}),c=[],a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ARow",{staticClass:"buy",style:{height:"15%"}},[o("ARow",[o("ACol",[o("div",[o("div"),o("VanCell",{style:{"border-radius":"25px","font-size":"3vw"},attrs:{"is-link":""},on:{click:t.showPopup}},[t._v(" "+t._s(t.selectTip)+" ")]),o("van-sku",{attrs:{goods:t.goods,"goods-id":1,"hide-stock":t.sku.hide_stock,quota:0,"quota-used":0,sku:t.sku},on:{"sku-selected":function(e){return t.onSelectButton(e)},"buy-clicked":t.onBuyClicked},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}})],1)])],1)],1)},u=[],l=(o("b0c0"),{name:"ProductDetailBuy",props:{typeList:Array,otherMessage:{shopName:String,commodityName:String,shopId:Number}},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t.sku.price=t.typeList[0].price,o=0;o<t.typeList.length;o++)t.sku.tree[0].v.push({id:String(o),name:t.typeList[o].subName,imgUrl:t.typeList[o].subIcon,previewImgUrl:t.typeList[o].subIcon}),t.sku.list.push({id:t.typeList[o].subId,s1:String(o),price:100*t.typeList[o].price,stock_num:t.typeList[o].stock}),t.sku.stock_num+=t.typeList[o].stock,t.typeList[o].price<t.sku.price&&(t.sku.price=t.typeList[o].price);t.goods.picture=t.typeList[0].subIcon;case 3:case"end":return e.stop()}}),e)})))()},data:function(){return{selectTip:"请选择：",show:!1,sku:{tree:[{k:"请选择",k_s:"s1",v:[],largeImageMode:!1}],list:[],price:null,stock_num:0,none_sku:!1,hide_stock:!1},goods:{picture:null},getInfo:{typeName:null,typeDetail:[],typeList:[],defaultPrice:null,totalStock:null,goodsPictureSmall:null},order:{shopName:String,subIcon:String,commodityName:String,subName:String,price:Number,countCommodity:Number,subId:Number,cid:Number,shopId:Number,stock:Number}}},methods:{onSelectButton:function(t){this.selectTip==="已选择："+t.skuValue.name?this.selectTip="请选择：":this.selectTip="已选择："+t.skuValue.name},showPopup:function(){this.show=!0},onBuyClicked:function(t){var e=0;this.order.shopName=this.otherMessage.shopName,this.order.subId=t.selectedSkuComb.id;for(var o=0;o<this.typeList.length;o++)this.typeList[o].subId===this.order.subId&&(e=o);this.order.subIcon=this.typeList[e].subIcon,this.order.commodityName=this.otherMessage.commodityName,this.order.subName=this.typeList[e].subName,this.order.price=this.typeList[e].price,this.order.countCommodity=t.selectedNum,this.order.cid=this.typeList[e].cid,this.order.shopId=this.otherMessage.shopId,this.order.stock=this.typeList[e].stock,console.log(this.order),this.$store.state.order=this.order,this.$router.push({name:"下单"})}}}),d=l,m=o("2877"),p=Object(m["a"])(d,a,u,!1,null,"13a781f1",null),h=p.exports,f=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t.showNo?o("div",[o("ARow",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[o("ARow",{staticStyle:{"margin-top":"10px","text-align":"center","font-weight":"bold"}},[t._v(" 还没有评论哦 ")])],1)],1):t._e(),t.showNo?t._e():o("div",[o("ARow",{style:{"margin-top":"10px","margin-bottom":"10px"}},[o("ARow",[o("van-cell",{style:{"border-radius":"25px"},attrs:{"is-link":""},on:{click:t.toCommit}},[o("div",{staticClass:"CommentsDetail"},[t._v(" 点击查看详细评论 ")])])],1),t._l(t.comments,(function(e,s){return o("ARow",{key:s,style:{"margin-left":"10px"}},[o("ARow",[o("ARow",[o("ACol",{attrs:{span:"3"}},[o("a-avatar",{attrs:{src:e.userSelfie}})],1),o("ACol",{style:{height:"8.3vw","font-size":"3vw"},attrs:{span:"4"}},[t._v(" "+t._s(e.userName)+" ")])],1),o("ARow",{style:{"font-size":"4vw"}},[t._v(" "+t._s(e.commentDetails)+" ")]),o("ARow",{style:{height:"5px"}})],1)],1)}))],2)],1)])},g=[],y={props:{comments:Array},name:"CommentsBlock",data:function(){return{show:!1,showNo:!0}},methods:{toCommit:function(){this.$router.push({path:"/CommentsDetail"})}},mounted:function(){0!==this.comments.length&&(this.showNo=!1)}},w=y,v=(o("1fd0"),Object(m["a"])(w,f,g,!1,null,"d8fdc83c",null)),b=v.exports,k=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ARow",[o("ARow",{style:{height:"5vw","margin-left":"10px","margin-top":"2px",color:"grey",fontSize:"3vw"}},[o("ACol",{style:{"font-size":"3vw","margin-top":"2vw"},attrs:{span:"4"}},[t._v(" 店铺名 ")]),o("ACol",{style:{"font-size":"5vw","font-weight":"bold"},attrs:{span:"12"}},[t._v(" "+t._s(t.shopName)+" ")])],1),o("ARow",{style:{height:"5vw","margin-left":"10px","margin-top":"2px",color:"grey",fontSize:"3vw"}},[o("ACol",{style:{"font-size":"3vw","margin-top":"1vw"},attrs:{span:"4"}},[t._v(" 简介 ")]),o("ACol",{style:{"font-size":"4vw"},attrs:{span:"18"}},[t._v(" "+t._s(t.shopDescription)+" ")])],1),o("van-cell",{style:{"border-radius":"25px"},attrs:{"is-link":""},on:{click:t.toShop}},[o("div",{staticClass:"CommentsDetail"},[t._v(" 点击进入商店 ")])])],1)},C=[],I={props:{shopName:String,shopDescription:String,shopId:Number},name:"ShopBlock",methods:{toShop:function(){this.$router.push({path:"/Shop"})}}},A=I,_=Object(m["a"])(A,k,C,!1,null,"a5aff05a",null),N=_.exports,x={name:"ProductDetailMessage",components:{ShopBlock:N,CommentsBlock:b,ProductDetailBuy:h},props:{goodsInfo:{commentCount:Number,commodityDetails:Array,commodityName:String,commodityPictures:Array,hotComments:Array,isCollected:Boolean,praiseCommentCount:Number,shopDescription:String,shopName:String,subCommodity:Array,shopId:Number}},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t.priceLow=t.goodsInfo.subCommodity[0].price,o=1;o<t.goodsInfo.subCommodity.length;o++)t.goodsInfo.subCommodity[o].price<t.priceLow&&(t.priceLow=t.goodsInfo);0!==t.goodsInfo.commentCount&&(t.praiseRate=t.goodsInfo.praiseCommentCount/t.goodsInfo.commentCount*100),t.otherMessage.shopName=t.goodsInfo.shopName,t.otherMessage.commodityName=t.goodsInfo.commodityName,t.otherMessage.shopId=t.goodsInfo.shopId,t.flag=!0;case 7:case"end":return e.stop()}}),e)})))()},data:function(){return{info:{name:null,price_low:null,price_high:null,picture:[],PraiseRate:null,goodsDetailPicture:[]},otherMessage:{shopName:String,commodityName:String,shopId:Number},priceLow:0,praiseRate:0,flag:!1}},methods:{showBuyBlock:function(){this.$refs.ProductDetailBuy.showPopup()}}},R=x,S=(o("9d03"),Object(m["a"])(R,r,c,!1,null,"9bb89f86",null)),L=S.exports,B=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",[o("VanGoodsAction",{staticClass:"bottomBlock"},[o("VanGoodsActionIcon",{attrs:{icon:"shop-o",text:"店铺"}}),o("VanGoodsActionIcon",{attrs:{icon:"chat-o",text:"客服"}}),o("VanGoodsActionIcon",{attrs:{color:t.collectColor,icon:t.collectIcon,text:t.collectInfo},on:{click:function(e){t.collectInfo=0}}}),o("VanGoodsActionButton",{attrs:{text:"立即购买",type:"danger"},on:{click:t.popup}})],1)],1)])},D=[],P={props:{sid:Number,isCollected:Boolean},name:"ProductDetail",data:function(){return{collect:!1}},computed:{collectInfo:{get:function(){return(!1===this.isCollected?"":"已")+"收藏"},set:function(){this.$emit("collect")}},collectColor:function(){return this.isCollected?"#ff5000":""},collectIcon:function(){return this.isCollected?"star":"star-o"}},created:function(){},methods:{popup:function(){this.$emit("clickbuy")}}},$=P,M=(o("21c0"),Object(m["a"])($,B,D,!1,null,"f5006338",null)),j=M.exports,z={name:"ProductDetail",components:{ProductFooter:j,ProductDetailMessage:L},data:function(){return{goodsInfo:null,flag:!1,sid:Number}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.e("chunk-4a8a29de").then(o.bind(null,"31ca"));case 2:return s=e.sent,n=s.$,e.next=6,n.get("/commodity?commodityId=".concat(t.$route.query.cid));case 6:i=e.sent,console.log(i.data.information),t.goodsInfo=i.data.information,t.flag=!0;case 10:case"end":return e.stop()}}),e)})))()},methods:{showBuy:function(){this.$refs.ProductDetailMessage.showBuyBlock()},doFavorite:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s,n,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.e("chunk-4a8a29de").then(o.bind(null,"31ca"));case 2:if(s=e.sent,n=s.$,t.goodsInfo.isCollected){e.next=12;break}return r=new FormData,r.append("cid",t.$route.query.cid),e.next=9,n.post("/favoritesCommodity",r);case 9:i=e.sent,e.next=15;break;case 12:return e.next=14,n.delete("/favoritesCommodity",{params:{cid:t.$route.query.cid}});case 14:i=e.sent;case 15:!0===i.data.success&&(t.goodsInfo.isCollected=!t.goodsInfo.isCollected);case 16:case"end":return e.stop()}}),e)})))()}}},O=z,V=Object(m["a"])(O,s,n,!1,null,"afa34bd4",null);e["default"]=V.exports}}]);