(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a2fe4ac"],{"55ca":function(e,t,s){"use strict";s("d687")},b4ee:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("AForm",{staticClass:"login"},[s("h3",[e._v("登录商城")]),s("p",{staticClass:"boldYaHei"},[e._v("请使用手机号以及登录凭证登录")]),s("AFormItem",{staticClass:"a-form-item"},[s("AInput",{staticClass:"input-phone",attrs:{placeholder:"手机号"},on:{change:e.checkPhone},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}},[s("AIcon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),null!==e.phoneErrorCode?s("h4",{staticStyle:{color:"red"}},[e._v(e._s(e.phoneErrorCode))]):e._e(),s("AFormItem",{staticClass:"a-form-item"},[s("AInputPassword",{staticClass:"input-password",attrs:{placeholder:"密码或验证码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}},[s("AIcon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),s("AFormItem",{staticClass:"a-form-item"},[s("ACheckbox",{model:{value:e.autoCommit,callback:function(t){e.autoCommit=t},expression:"autoCommit"}},[e._v(" 10天内自动登录 ")]),s("AButton",{staticStyle:{"font-feature-settings":"'tnum'"},attrs:{type:"link"},on:{click:e.getVerifyCode}},[e._v(e._s(e.verify))])],1),s("AButton",{staticClass:"submit",attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v(" 登录 ")]),s("AButton",{staticClass:"submit",attrs:{type:"default"},on:{click:function(t){return e.$router.push("/register")}}},[e._v(" 注册 ")])],1)},r=[],a=s("1da1"),n=(s("96cf"),s("d3b7"),s("3ca3"),s("ddb0"),{name:"Login",created:function(){this.$cookies.isKey("username")&&this.$cookies.isKey("password")&&(this.$store.state.user={tel:this.$cookies.get("username"),password:this.$cookies.get("password")},this.doLogin(this.$store.state.user.tel,this.$store.state.user.password))},beforeDestroy:function(){0!==this.intervalCode&&clearInterval(this.intervalCode)},data:function(){return{phone:null,password:null,phoneErrorCode:null,intervalCode:null,coldTime:0,autoCommit:!1}},computed:{verify:function(){return 0===this.coldTime?"发送验证码":"请等".concat(this.coldTime,"秒再发送")}},methods:{checkPhone:function(){/^1[34578]\d{9}$/.test(this.phone)?this.phoneErrorCode="":this.phoneErrorCode="手机号的格式不正确"},getVerifyCode:function(){var e=this;0===this.coldTime?(this.coldTime=60,this.intervalCode=setInterval((function(){e.coldTime-1>0?e.coldTime-=1:(e.coldTime=0,clearInterval(e.intervalCode),e.intervalCode=0)}),1e3)):this.antMessage.error("现在还不能重新发送验证码哦")},handleSubmit:function(){this.doLogin(this.phone,this.password)},doLogin:function(e,t){var o=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var a,n,i,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,s.e("chunk-4a8a29de").then(s.bind(null,"31ca"));case 2:return a=r.sent,n=a.$,i=new FormData,i.append("username",e),i.append("password",t),r.next=9,n.post("/login",i);case 9:if(c=r.sent,!0===c.data.success){r.next=14;break}o.antMessage.error("输入的账号与密码有误，请重新输入"),r.next=21;break;case 14:return o.autoCommit&&(o.$cookies.set("username",o.phone,"10d"),o.$cookies.set("password",o.password,"10d")),o.$store.state.user.uid=c.data.information.uid,o.$store.state.user.selfie=c.data.information.userSelfie,o.$store.state.loginstate=!0,o.antMessage.success(c.data.message),r.next=21,o.$router.push("/");case 21:case"end":return r.stop()}}),r)})))()}}}),i=n,c=(s("55ca"),s("2877")),l=Object(c["a"])(i,o,r,!1,null,"07061892",null);t["default"]=l.exports},d687:function(e,t,s){}}]);